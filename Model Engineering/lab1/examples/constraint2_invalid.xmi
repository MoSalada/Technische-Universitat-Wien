<?xml version="1.0" encoding="UTF-8"?>
<modelEngLab1:CPS
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:modelEngLab1="http://www.example.org/modelEngLab1"
    xsi:schemaLocation="http://www.example.org/modelEngLab1 ../model/modelEngLab1.ecore"
    name="CPSConnect">
  <controller
      name="C1"
      messaginglink="//@messagebroker.0/@messaginglink.3 //@messagebroker.0/@messaginglink.9">
    <topics>temp</topics>
    <topics>production</topics>
    <topics>logistics</topics>
  </controller>
  <messagebroker
      Name="Central">
    <topics>temp</topics>
    <topics>production</topics>
    <topics>logistics</topics>
    <messaginglink
        messagebroker="//@messagebroker.0">
      <topics>logistics</topics>
    </messaginglink>
    <messaginglink
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
      <topics>production</topics>
    </messaginglink>
    <messaginglink
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
    </messaginglink>
    <messaginglink
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
      <topics>production</topics>
      <topics>logistics</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>logistics</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>production</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
      <topics>logistics</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
    </messaginglink>
    <messaginglink
        type="SUBSCRIBE"
        messagebroker="//@messagebroker.0">
      <topics>temp</topics>
      <topics>production</topics>
      <topics>logistics</topics>
    </messaginglink>
    <connectionmodule
        xsi:type="modelEngLab1:Wireless"
        name="CentralWireless"
        connectionmodules="//@environment.2/@nodes.0/@connectionmodule.0 //@environment.1/@nodes.1/@connectionmodule.0 //@environment.1/@nodes.0/@connectionmodule.0"
        messagebroker="//@messagebroker.0"
        range="20">
      <supportedProtocols>SMQTT</supportedProtocols>
      <supportedProtocols>MQTT</supportedProtocols>
    </connectionmodule>
    <connectionmodule
        xsi:type="modelEngLab1:Wired"
        name="CentralWired"
        connectionmodules="//@environment.1/@nodes.0/@connectionmodule.1 //@environment.0/@nodes.0/@connectionmodule.0 //@environment.0/@nodes.1/@connectionmodule.0"
        messagebroker="//@messagebroker.0">
      <supportedProtocols>MQTT</supportedProtocols>
      <supportedProtocols>SMQTT</supportedProtocols>
    </connectionmodule>
    <position
        x="3.0"
        y="3.0"/>
  </messagebroker>
  <environment
      name="Warehouse">
    <nodes name="Scaffolding"
        messaginglink="//@messagebroker.0/@messaginglink.4">
      <component
          xsi:type="modelEngLab1:Sensor"
          name="Scanner"
          topic="logistics">
        <function
            name="getContent()"
            descrption="logistics"
            returnDataType="STRING"/>
      </component>
      <position
          x="8.0"
          y="8.0"
          z="-1.0"/>
      <connectionmodule
          xsi:type="modelEngLab1:Wired"
          name="SCAFFOLDINGWired"
          connectionmodules="//@messagebroker.0/@connectionmodule.1"
          node="//@environment.0/@nodes.0">
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionmodule>
    </nodes>
    <nodes name="ConveyorBelt"
        messaginglink="//@messagebroker.0/@messaginglink.0">
      <component
          xsi:type="modelEngLab1:Actuator"
          name="Motor"
          topic="logistics">
        <function
            name="setSpeed(INT: speed)"
            descrption="logistics">
          <parameter
              name="speed"/>
        </function>
      </component>
      <position
          x="7.0"
          y="7.0"
          z="-1.0"/>
      <connectionmodule
          xsi:type="modelEngLab1:Wired"
          name="CONVEYORBELTWired"
          connectionmodules="//@environment.0/@nodes.0/@connectionmodule.0"
          node="//@environment.0/@nodes.1">
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionmodule>
    </nodes>
  </environment>
  <environment
      name="ProductionFloor">
    <nodes name="3dPrinter"
        messaginglink="//@messagebroker.0/@messaginglink.1 //@messagebroker.0/@messaginglink.5 //@messagebroker.0/@messaginglink.6">
      <component
          xsi:type="modelEngLab1:Actuator"
          name="HeatedPrintBed"
          topic="temp">
        <function
            name="setTemperature(INT: temperature)"
            descrption="temp">
          <parameter
              name="temperature"/>
        </function>
      </component>
      <component
          xsi:type="modelEngLab1:Actuator"
          name="Extrudor"
          topic="production">
        <function
            name="startPrint()"
            descrption="production"/>
        <function
            name="getRemainingPrintDuration()"
            descrption="production"
            returnDataType="INT"/>
      </component>
      <position/>
      <connectionmodule
          xsi:type="modelEngLab1:Wireless"
          name="3DPRINTERWireless"
          connectionmodules="//@messagebroker.0/@connectionmodule.0"
          node="//@environment.1/@nodes.0"
          range="10">
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionmodule>
      <connectionmodule
          xsi:type="modelEngLab1:Wired"
          name="3DPRINTERWired"
          connectionmodules="//@messagebroker.0/@connectionmodule.1"
          node="//@environment.1/@nodes.0">
        <supportedProtocols>SMQTT</supportedProtocols>
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionmodule>
    </nodes>
    <nodes name="Robot"
        messaginglink="//@messagebroker.0/@messaginglink.7">
      <component
          xsi:type="modelEngLab1:Sensor"
          name="InternalTemperature"
          topic="temp">
        <function
            name="getTemperature"
            descrption="temp"
            returnDataType="INT"/>
      </component>
      <component
          xsi:type="modelEngLab1:Actuator"
          name="RoboticArm"
          topic="logistics">
        <function
            name="grab(INT: strength)"
            descrption="logistics">
          <parameter
              name="strength"
              dataType="INT"/>
        </function>
      </component>
      <position
          x="2.0"
          y="2.0"
          z="1.0"/>
      <connectionmodule
          xsi:type="modelEngLab1:Wireless"
          name="ROBOTWireless"
          connectionmodules="//@messagebroker.0/@connectionmodule.0"
          node="//@environment.1/@nodes.1"
          range="3">
        <supportedProtocols>MQTT</supportedProtocols>
      </connectionmodule>
    </nodes>
  </environment>
  <environment
      name="ServiceRoom">
    <nodes name="CentralClimateControl"
        messaginglink="//@messagebroker.0/@messaginglink.2 //@messagebroker.0/@messaginglink.8">
      <component
          xsi:type="modelEngLab1:Actuator"
          name="Fan"
          topic="temp">
        <function
            name="turnOn()"
            descrption="temp"/>
        <function
            name="turnOff()"
            descrption="temp"/>
      </component>
      <component
          xsi:type="modelEngLab1:Actuator"
          name="TemperatureRegulator"
          topic="temp">
        <function
            name="setTemperature(INT: temperature)"
            descrption="temp">
          <parameter
              name="temperature"
              dataType="INT"/>
        </function>
      </component>
      <position
          x="5.0"
          y="5.0"/>
      <connectionmodule
          xsi:type="modelEngLab1:Wireless"
          name="CENTRALCLIMATECONTROLWireless"
          connectionmodules="//@messagebroker.0/@connectionmodule.0"
          node="//@environment.2/@nodes.0"
          range="10">
        <supportedProtocols>SMQTT</supportedProtocols>
      </connectionmodule>
    </nodes>
  </environment>
</modelEngLab1:CPS>
